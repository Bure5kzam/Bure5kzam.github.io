---
layout: single
title: 리눅스 유저 보기
category: linuxMaster
---

# OverView
리눅스 시스템에 접속 중인 유저 정보를 확인하는 명령어들입니다.

# files
<!-- ## /etc/wmp -->

# Command (접속 중인 유저 조회)

## $who
현재 접속중인 유저들의 정보를 출력합니다.
`-u, --user` 옵션 유무에 따라 동작이 달라지는데, `-u`를 함께 쓰면 유저별로 정보를 보여주고 없으면 현재 계정에 대한 정보만 표시됩니다. 

```console
who [OPTION]... [ FILE | ARG1 ARG2 ]
```


옵션이 없으면 NAME, LINE, TIME, COMMENT을 보여줍니다. `-H` 옵션으로 행 이름을 볼 수 있습니다.

```console
[root@localhost ~]# who -H
NAME     LINE         TIME             COMMENT
root     tty1         2022-09-04 16:07

[root@localhost ~]# who -aH
NAME       LINE         TIME             IDLE          PID COMMENT  EXIT
           system boot  2022-09-04 16:07
           run-level 3  2022-09-04 16:07
root     + tty1         2022-09-04 16:07 02:48         625
```


**기본 행 구성**
`who` 명령어에서 기본적으로 제공하는 행 구성 모음입니다.

| 옵션        | 내용                                                                                                                                                                                                                                                                                                                                   |
| ----------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| -a, --all   | 기본 구성 옵션입니다. 하기 옵션으로 구성되어있으며, 유저별 정보들을 보여줍니다. <br/> `-b` 마지막 부팅 시간 <br/> `-d` dead process들 <br/> `-l` login process <br/> `-p` init에서 파생되어 활성화된 프로세스들 <br/> `-r` 런레벨 <br/> `-t` 마지막 시스템 시간 변화 <br/> `-T` 유저의 메세지 상태 추가 <br/> `-u` 유저 별로 정보 출력 |
| -s, --short | name, line, time 출력                                                                                                                                                                                                                                                                                                                  |


## $w
머신의 부하가심한지 확인하고 싶을 때 좋은 명령어입니다.

명령어를 입력하면 헤더와 바디로 나눠 시스템과 유저에 대한 정보가 출력됩니다.

헤더 정보 : 시스템 사용량에 대한 전체 통계 정보

- 현재 시간
- 시스템이 부팅된 시간
- 접속 중인 유저 수
- 시스템 부하 평균 (1, 5, 15분)

바디 정보 : 유저별 사용량 정보

- 유저 이름
- tty 이름
- 원격 호스트
- 로그인 시간
- 유휴 시간
- JCPU : tty에 연결된 모든 프로세스들이 사용한 시간
- PCPU : what 필드의 프로세스가 사용한 시간
  
```console
[root@localhost ~]# w

 17:51:20 up  1:43,  1 user,  load average: 0.01, 0.03, 0.05
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
root     tty1                      16:07    1:43m  0.01s  0.01s -bash
```

특이하게 헤더가 기본으로 출력되고 `-h`를 사용하면 출력되지 않습니다.

## $users
접속 중인 유저들의 호스트 네임만 출력하는 간단한 명령어입니다.
접속 중인 유저들을 대상으로 파이프라인을 동작시킬 때 사용하기 좋습니다.

```
[root@localhost ~]# users
root
```

# Command (접속한 본인 계정 조회)
본인이 사용 중인 계정의 정보를 출력하는 명령어들입니다.

## $whoami
사용중인 계정의 hostname을 출력합니다.
쉘에서도 호스트네임을 확인할 수 있어 사용처가 모호할 수 있는데, stdout 으로 출력해서 파이프라인에서 사용할 때 활용합니다.

```console
[root@localhost ~]# whoami

root
```

## $id
사용중인 계정 정보를 출력합니다.
UID, GID, groups 같은 정보를 볼 수 있어 whoami 보다 유용합니다.


# Command (시스템 내 계정 관리)
## $lslogins

시스템내의 계정 정보들의 접속기록을 확인, 관리하는 명령어입니다.
로그 파일들(wtmp, btmp), 계정 정보(/etc/shadow, /etc/passwd)를 바탕으로 데이터를 출력합니다.

```console
lslogins [options] [-s|-u[=UID]] [-g groups] [-l logins]
```

Hostname이나 UID만 넣으면 해당 유저의 관련 정보와 최근 로그를 함께 볼 수 있습니다.

**필터링 옵션**
`-s` `-u` 옵션으로 uid가 1000이 넘는 시스템 계정과 그렇지 않은 유저 계정만을 필터링해서 볼 수 있습니다.
`-g` 그룹에 속하는 유저만 확인합니다.

**필드 옵션**

| 옵션 | 내용             |
| ---- | ---------------- |
| -f   | 실패 기록을 출력 |
|      |                  |

**출력 포맷 옵션**

| 옵션 | 내용                       |
| ---- | -------------------------- |
| -c   | delimeter를 colon으로 출력 |