---
layout: single
title: linux 커맨드
date: 2021-12-01 09:23
category: [TIL, linux]
author: bure5kzam
tags: [linux]
summary: 
published: false
---


## crontab



## 커널 정보

| 옵션                            | 내용                    |
| ------------------------------- | ----------------------- |
| uname -r                        | 커널 정보 출력          |
| /lib/modules/커널명/modules.dep | 모듈의 커널 의존성 위치 |



## 장치

| 명령어           | 내용                                                                                 |
| ---------------- | ------------------------------------------------------------------------------------ |
| fdisk -l         | 연결된 디스크 목록                                                                   |
| proc/partitions  | 디스크 정보가 있는 디렉토리                                                          |
| **/proc/mounts** | proc 가상 파일 시스템의 일부 (리눅스 커널이 시스템 상태를 파일 형식으로 보여주는 것) |
| /etc/mtab        | 현재 마운트된 정보를 담는다.                                                         |
| /etc/fstab       | 부팅시에 마운트 할 만한 정보를 담는다.                                               |
|                  |                                                                                      |

# 커맨드 위치 찾기
| 명령어     | 내용                    |
| ---------- | ----------------------- |
| which grep | grep 명령어의 위치 찾기 |

# 바로가기 만들기
| 커맨드 | 내용                                       |
| ------ | ------------------------------------------ |
| ln -s  | 심볼릭 링크 생성하기 source => destination |


# 유저 수정
| 커맨드                      | 내용                                                                                          |
| --------------------------- | --------------------------------------------------------------------------------------------- |
| usermod -c <"이름"> <계정>  | 계정의 이름을 변경합니다.                                                                     |
| usermod -d <"경로"> <계정>  | 계정의 홈 디렉터리를 변경합니다.                                                              |
| usermod -s <"셸"> <계정>    | 계정의 로그인 기본 셸을 변경합니다.                                                           |
| usermod -e <날짜> <계정>    | 계정이 해당 날짜에 만료되도록 합니다.                                                         |
| usermod -g <그룹> <계정>    | 사용자의 기본 소속 그룹을 변경합니다.                                                         |
| usermod -G <그룹> <계정>    | 계정의 소속 그룹을 변경합니다. 만약 여러 그룹을 지정할 때에는 ,(콤마) 로 구분하여 지정합니다. |
| usermod -a -G <그룹> <계정> | 계정의 소속 그룹을 추가(add) 합니다.                                                          |


출처: https://dololak.tistory.com/270 [코끼리를 냉장고에 넣는 방법]

# 압축
 | 커맨드                          | 내용                                 |
 | ------------------------------- | ------------------------------------ |
 | zip -r (destination) (target)   | zip 파일 압축하기, 압축률 낮음       |
 | unzip (target) -d (destination) | 해당 디렉토리dp 파일명으로 압축을 품 |
 # 단일 압축
 파일 하나만 압축할 수 있음. 용량 줄이는 알고리즘이 적용됨
 | 커맨드          | 내용           |
 | --------------- | -------------- |
 | gzip (target)   | gzip 압축      |
 | gunzip (target) | gzip 압축 해제 |
 | xz (target)     | xz 압축        |
 | xz -d (target)  | xz 압축 해제   |

# 여러 파일 패키징

| 커맨드                              | 내용                                                           |
| ----------------------------------- | -------------------------------------------------------------- |
| tar -cvf (destination) (target)     | create, verbose filename 대상들을 압축. 용량이 줄어둘지는 않음 |
| tar -xvf (target) -C (압축 풀 경로) | 패키징 풀기. tar는 폴더 생성 기능이 없음.                      |
| tar+xz                              |
| tar -Jcvf                           | 한 파일로 모으고, 압축하기                                     |
| tar-Jxvf                            | 압축 풀고, 모은것 풀기                                         |
| tar+gz                              |                                                                |
| tar -zcvf (destination) (target)    | 압축                                                           |
| tar -zxvf (target) -C (directory)   | 압축 풀기                                                      |


 # 파일 생성하기
 | 커맨드            | 내용                                                                      |
 | ----------------- | ------------------------------------------------------------------------- |
 | touch a.txt b.txt | 빈 파일 생성하기                                                          |  |
 | echo ABC > a.txt  | 출력 결과를 파이프라인으로 오른쪽에 둠. 기존 파일은 모두 지우고 새로 교체 |
 | echo ABC >> a.txt | 출력 결과를 append                                                        |


# 유저 핸들링하기

| 커맨드                                                                                                                    | 내용                                                              |
| ------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------- |
| deluser --remove-home (username)                                                                                          | 해당 요저와 홈디렉토리를 삭제                                     |
| cat /etc/passwd \| grep bash                                                                                              | 1. user : 2. pw : 3. uid: 4. gid: 5. ?? :6. home_dir: 7. bash_dir |
| users                                                                                                                     | 유저 목록 확인하기                                                |
| cat /etc/group                                                                                                            | 그룹 목록 확인하기                                                |
| groups                                                                                                                    | 그룹 목록 확인하기                                                |
| sudo useradd -m user01  [-d 디렉토리] [-s 쉘] [-p 패스워드]                                                               | 유저 생성                                                         |
| sudo passwd user 01                                                                                                       | 비밀번호 변경                                                     |
| change                                                                                                                    | 비밀번호 만기일 변경                                              |
| groupadd [-g gid] (groupname)                                                                                             | 그룹 추가                                                         |
| groupdel (groupname)                                                                                                      | 그룹 제거                                                         |
| gpasswd [-a username] [-d username] [-r: remove passwd] [-R: access restrict] [-A Administrator uname]        (groupname) | 그룹에 패스워드를 설정                                            |
| who          [-r: run level]                                                                                              | 유저와 접속한 시간 출력                                           |


# 권한 설정하기
| 커맨드                  | 이름                             |
| ----------------------- | -------------------------------- |
| chown -R uid:gid ~/work | 디렉토리 내부에 있는 파일들 설정 |

# 디렉토리 권한
read : 디렉토리 안 내부 파일 확인 권한 (ls로 테스트)
wirte : 디렉토리 내 파일 생성, 삭제 권한 (touch로 테스트)
execute : 디록토리로 진입 여부 결정 (cd 로 테스트)

# 수정된 시간 확인
stat test
stat -c %Y test

# 시스템 정보 확인하기
| 커맨드              | 이름                                                                           |
| ------------------- | ------------------------------------------------------------------------------ |
| cat /prco/meminfo   | 메모리 정보                                                                    |
| cat /prco/cpuinfo   | cpu 정보                                                                       |
| free -h             | 전체 저장공간 남은 공간 확인                                                   |
| ls -alh             | 해당 디렉토리 용량 확인                                                        |
| du [-h: human]      | 용량 확인                                                                      |
| cat /proc/scsi/scsi | SCSI, SSD, HDD 정보 확인 (Vender, Model, Type)                                 |
| lsscsi              | 어떤 파일과 연결되었는지 알려줌                                                |
| lsusb [-t tree]     | USB에 연결된 장치 목록                                                         |
| lsmem               |                                                                                |
| lscpu               |                                                                                |
| fdisk               | 파티션 관리 유틸리티. (-l 파티션 정보 읽기)                                    |
| uptime              | 시간/ 부팅후 시간 / 현재 접속자 / CPU 부하 (1분, 5분, 15분 시스템 부하 평균값) |

# 운영체제 정보 확인하기
| 커맨드         | 이름                                            |
| -------------- | ----------------------------------------------- |
| lsb_release -a | 운영체제의 이름, Description, Release, Codename |
| uname -r       | 커널 이름 확인                                  |
| lscpu          | 운영체제의 비트                                 |

# 네트워크 확인하기
네트워크 인터페이스 : 네트워크 설정, 카드 정보를 포함한 연결 통로
| 커맨드   | 내용 |
| -------- | ---- |
| ip addr  |      |
| ifconfig |      |
| arp      |      |
| route    |      |

# 프로세스 관리하기
 cpu가 연산할 명령어를 가져올 때, 디스크는 접근 속도가 느린 반면 메모리는 빨라서 중간 버퍼로 사용하기 적합하다.

 메모리에 적재되어 cpu가 access 하도록 load 되어있는 프로그램을 프로세스라고 한다.
 (Fetch / Decode / Excution) 되어서 작업 수행

 메모리에는 커널이 동작하는 메모리 공간인 Kernel Space와 app이 동작하는 User space가 있다.

 PID1 (systemd)
 1번 프로세스는 커널을 초기화 하는 동작들을 수행한다(로그인 세션 관리 / 장치 관리 / 로그 처리 수행)
 부트로더가 커널을 실행하면 처음 실행하는 프로세스이다.

 PID2 (threadd) 
 커널 공간에서 실행하는 커널 프로세스의 생성을 담당한다.
 모든 커널 스레드의 부포 프로세스
 
| 커맨드               | 내용                                               |
| -------------------- | -------------------------------------------------- |
| ps [-e] [-f]         | User Space에 있는 User Level Process 정보가 출력됨 |
| 쉘에서 명령어 뒤에 & | Background Process로 동작                          |
| vi에서 ^+Z           | 현재 프로세스를 백그라운드로 전환시킴              |
| fg                   | 최근에 Background 이동한 Process를 다시 꺼내온다.  |
| dmesg –T             | 커널의 버퍼 로그에 남은 메세지                     |
# 프로세스 관리하기 (top)
Task 설명
• running: 실행 중 프로세스의 갯수
• sleeping: I/O 나 event 기다리는 프로세스의 갯수
• stopped: 컨트롤 + z 와같은 STOP 시그널 받은 프로세스
• zombie: 프로세스가 종료되었지만 OS 내부 시스템 자원 해지가 안된 프로세스