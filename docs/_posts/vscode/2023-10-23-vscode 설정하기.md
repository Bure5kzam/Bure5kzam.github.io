---
layout: posts
title: vscode 개발 환경 설정하기
date: 2023-10-23 19:17
category: vscode
author: Bure5kzam
tags:
---

> Doc Reference : 23-10-23 [Vscode  Reference](https://code.visualstudio.com/docs)
> OS : ubuntu 20.04 - 22.04

회사 팀을 옮기면서 기존에 Visual studio를 버리고 Visual studio로 갈아타게 되었다.

일주일 정도 사용해보니 OS에 구애받지 않고 사용할 수 있는점, 플러그인 세팅이 다양한점, 리소스를 적게 잡아먹는 점이 마음에 들었다.

앞으로 계속 사용할 것 같아 설정 과정을 기록으로 남긴다.

## Purpose

- 폴더(워크스페이스) 별 독립적인 설정
- 확장 프로그램 설정 및 공유
- 디버거 설정 (C++, Python)

**Advance**

- 프로필과 세팅 별 시각적인 효과
- 여러 프로젝트를 한번 인스턴스에서 열어서 보기 (워크스페이스)
- 폴더(워크스페이스) 별 개발용 도커 컨테이너 구성

참고로 워크스페이스는 vscode를 켜서 처음 폴더를 열었을 때 위치로 지정되며, 해당 폴더는 워크스페이스에 포함된다.

## 설정 적용 우선순위

`setttings.json`은 vscode의 기본 설정 관리 파일이다.

상세한 설정에 앞서 vscode는 같은 파일이라도 경로에 따라 적용 우선순위가 다르기 때문에 짚고 넘어가자.

적용 범위가 좁을 수록 우선 적용된다.

(vscode 기본 설정 < 유저 설정 < 워크 스페이스 설정 순)


1.  `defaultSetting.json`  모든 인스턴스에 적용되는 설정. MS에서 권장하는 구성이다.
	1. IDE에서 열어 볼 수 있으며 read-only가 적용돼있다.
	2. [vscode 도큐먼트]( [Ms docs](https://code.visualstudio.com/docs/getstarted/settings#_default-settings)에서도 볼수있음.
2. `~/.config/Code/User/settings.json`  OS에 로그인한 유저에 적용되는 설정. 
	1. [vscode 도큐먼트, User & workspace setting](https://code.visualstudio.com/docs/getstarted/settings)
3. `${workspaceFolder}/.vscode/settings.json` 워크스페이스에 적용되는 설정.
	1. `workspaceFolder`는 현재 열린 프로젝트 루트 경로로 치환되는 vscode 자체 변수다.
	2. [vscode 도큐먼트, Workspace setting](https://code.visualstudio.com/docs/getstarted/settings#_workspace-settings)
	3. vscode 자체 변수가 궁금하다면 [vscode 도큐먼트, Variable referecne](https://code.visualstudio.com/docs/editor/variables-reference#_predefined-variables) 참고

사실 설정 적용은 위에서 나타낸 것 보다 까다롭다. ssh 접속을 하거나 멀티 루트 워크스페이스를 구성하면 더 복잡해지지만 지금은 다루지 않는다.

[[vscode-setting-scope]] - 조금 더 상세한 vscode 설정 종류
[[vscode-workspace]] - 워크스페이스에 대한 설명

> * defaultSetting은 프로그램에 하드코딩되어있다는 [Stack overflow](https://stackoverflow.com/questions/53369371/what-is-the-location-of-the-default-settings-file-of-vscode) 글이 있었다.

## 설정하는 방법


앞서 말했듯 설정은 Json 파일로 관리하기 때문에, 수정하려는 속성의 key값을 도큐먼트에서 찾아서 수정해서 설정할 수 있다.

IDE에서 편집창을 제공하므로 혹시 임의 수정이 부담스럽다면 UI로 하면 된다. (내 버전에서는 File >> Settings나 사이드바 하단의 톱니 버튼을 눌러 수정할 수 있다.)

`command palette`를 이용하면 키워드 검색을 제공해서 더 간단하다. 기본 단축키는 `ctrl + shift + p`다.

Json 수정과 UI 수정 모두 지원하니 편한 대로 고르자

명령형 팔레트에 `user setting`을 검색하면 **Preference Open UserSetting**와 **Preference Open UserSetting(JSON)**이 있다.

개인적으로는 인터넷 없이 설정하는 경우가 많아서 Json 설정을 쉘 스크립트로 만들어두는 방법을 선호한다.

## 세부적인 설정 파일들

위에서 `settings.json` 파일을 언급했었다.

`settings.json` 은 에디터, 터미널 같이 주로 editor로서의 설정값을 가진 파일이다.

개발에 필요한 디버깅, 실행, 자동완성, 컴파일같은 기능은 확장프로그램을 통해 제공되며, 기본값이 필요시 직접 수정해줘야한다.

vscode에서 폴더를 열 수 있는데, 이를 워크스페이스라고 한다.

워크스페이스 단위로 적용되는 설정을 분리해서 관리할 수 있는데 `.vscode` 폴더에 저장된다.

`settings.json`와 기타 설정파일들이 여기 저장된다.

```bash
settings.json
# vscode 설정 파일. vscode에서 value로 설정된다 싶은 내용 중 따로 설명되지 않은 내용은 다음과 같다.

launch.json
# vscode에 내장된 디버그 기능과 관련된 설정 파일.
# 디버깅할 언어 종류와 파일, 중단 패턴 시나리오 등을 설정할 수 있다.

task.json
# vscode와 상호작용 하는 스크립트 / 프로세스를 구성하는 파일.
# 스크립트나 프로세스를 테스크로 저장해두면 필요시 단축키로 실행할 수 있음.

c_cpp_properties.json
# 언어 관련 확장 프로그램 중 C++ 파일에 적용되는 확장 프로그램을 설정하는 파일. 자동 완성 기능인 Intelisence, 실시간 컴파일 및 의존성 확인 기능 등을 지원함.
# 기본적으로 파일의 확장자를 기준으로 적절한 확장 프로그램이 설정된다.
# 언어 별로 연관 확장프로그램과 설정 파일이 있음. [문서](https://code.visualstudio.com/docs/languages/overview) 참고

jsconfig.json
# 마찬가지로 자바스크립트용 확장 프로그램 설정 파일

...
```

`settings`, `launch`, `task` 정도만 기본적인 설정 파일이다.

컴파일이나 자동완성 기능은 사용 언어에 따라 다르기 때문에 확장 프로그램을 설치해서 설정해야 한다.

세부적인 내용은 향후 시간이 되면 다루겠다.

[[vscode-dotfiles]]

[vscode 도큐먼트, Programming Launguage](https://code.visualstudio.com/docs/languages/overview)

> 단축키 지정 파일인 keybindings.json도 있는데 아직 문서를 확인하지 못함.

## 확장 프로그램

vscode의 디버거, 인텔리전스 등은 확장 프로그램을 통해 제공되는 기능이다.

[[vscode extension 구성]]

## 프로필

위에서 vscode는 다양한 설정들을 파일로 관리한다고 설명했다.

프로필은 설정을 온라인이나 계정에 저장해둿다가 복원하는 기능이다.

온라인(Github gist)로 공유할 수 있고 한번 저장하면 오프라인에서도 사용할 수 있지만 다른 곳에서 설정해둔 값을 가져올려면 인터넷에 한번은 연결을 해야한다.

[vscode 도큐먼트 : Profile](https://code.visualstudio.com/docs/editor/profiles) 에는 다음과 같은 설명이 있다.

> 프로필을 선택하면 현재 워크스페이스 설정과 연동되며, 해당 폴더를 열 때마다 워크스페이스에 지정된 프로필이 활성화된다. 
> 워크 스페이스 활성화 시에 마지막으로 사용한 프로필 정보가 남아 있으면 프로필은 해당 관련 프로필로 전환된다.

# 개발용 컨테이너

devcontainer를 사용하면 vscode에서 열린 파일들을 공유하는 도커 컨테이너를 생성할 수 있다.

## Vscode server

vscode에서 ssh 접속을 하면 접속지의 파일시스템이나 익스텐션을 사용할 수 있는데, 이는 접속지의 vscode-server를 사용하는 덕분이다.

[vscode 도큐먼트 : Visual studio server](https://code.visualstudio.com/docs/remote/vscode-server)


## 기타

이외에도 vscode 설정에 관련된 꿀팁들이 [문서](https://code.visualstudio.com/docs/getstarted/tips-and-tricks)로 정리되어있으니 확인해보면 좋다.