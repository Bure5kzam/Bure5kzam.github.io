---
title: AWS에서 8080포트에 연결을 못하는 문제
date: 2021-07-27 20:00:00 +/-TTTT
categories: [TIL, linux]
tags: [aws, ssafyens, trouble]     # TAG names should always be lowercase
toc : true
comments : true
math : true
mermaid: true
---

AWS 서버에 접근하면서 생긴 문제입니다.

1. AWS에서 MySQL을 3307서버로 열어주고 외부에서 접근
   1. sudo ufw open 3307
   2. mysql -h i5a109.p.ssafy.io -u sfens -P 3307 -
   3. **성공**
2. AWS에서 nodjs서버를 8080으로 열어주고 외부에서 접근
   1. **fail** (과정은 하단에 기재했습니다.)

## AWS에서 nodejs서버를 열었습니다.

```js
//8080 서버 오픈
const express = require("express");
const app = express();
const routes = require("./routes");

require("dotenv").config();
const env = process.env;

//middleware

// content-type - application/json
//app.use(express.json());

// content-type - application/x-www-form-urlencoded
//app.use(express.urlencoded({ extended: true }));

app.use("/", routes);
app.listen(env.NODEJS_PORT || 8080,"0.0.0.0", () => {
  console.log(env.NODEJS_PORT || 8080);
  console.log("welecome to nodejs server");
});
```

```js
//.env
...
NODEJS_PORT=8080
...
```



## bash에서 방화벽을 열어주었습니다.

```bash
//bash
$ sudo ufw allow 8080
$ sudo ufw allow 8080/tcp

$ init 6
```

## Browser에서 접속했습니다

브라우저에 다음의 주소를 입력했습니다. http://i5a109.p.ssafy.io:8080/



>(결과 : 크롬 접속 실패 페이지)
>
># 사이트에 연결할 수 없음
>
>**i5a109.p.ssafy.io**에서 응답하는 데 시간이 너무 오래 걸립니다.
>
>다음 방법을 시도해 보세요.
>
>- 연결 확인
>- [프록시 및 방화벽 확인](chrome-error://chromewebdata/#buttons)
>- [Windows 네트워크 진단 프로그램 실행](javascript:diagnoseErrors())
>
>ERR_CONNECTION_TIMED_OUT



혹시 nodejs 내의 라우팅 문제거나 값 반환 문제면 반환값이 없다고 뜨니 그 문제는 아닌것 같고, 리눅스 설정이나 클라우드 환경 설정을 안해준 것 같은데 어떻게 하면될지 몰라 도움 요청드립니다.